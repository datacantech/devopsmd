# **–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã kube-proxy –∏ CoreDNS –≤ Kubernetes**

## **1. Kube-proxy: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç?**

**Kube-proxy** ‚Äî —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Kubernetes, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–µ—Ç–µ–≤—É—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –º–µ–∂–¥—É **Pods**, **Services** –∏ –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ –∫–ª–∞—Å—Ç–µ—Ä–∞.

Kubernetes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–ª–æ—Å–∫—É—é (flat) —Å–µ—Ç–µ–≤—É—é –º–æ–¥–µ–ª—å**, –≥–¥–µ:
- **–ö–∞–∂–¥—ã–π Pod –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π IP** (–∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ CNI-–ø–ª–∞–≥–∏–Ω–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, `10.244.0.0/16`).
- **Pod'—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –Ω–∞–ø—Ä—è–º—É—é** –±–µ–∑ NAT (–¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –Ω–æ–¥–∞—Ö).
- **Service'—ã –ø–æ–ª—É—á–∞—é—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π IP (ClusterIP)**, –∫–æ—Ç–æ—Ä—ã–π –±–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `kube-proxy`.

CoreDNS ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π DNS-—Å–µ—Ä–≤–µ—Ä –≤ Kubernetes, –∑–∞–º–µ–Ω—è—é—â–∏–π `kube-dns`. –û–Ω —Ä–µ–∑–æ–ª–≤–∏—Ç –∏–º–µ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
- `<service>.<namespace>.svc.cluster.local` ‚Üí ClusterIP —Å–µ—Ä–≤–∏—Å–∞.
- `<pod-ip>.<namespace>.pod.cluster.local` ‚Üí IP Pod'–∞ (–æ–±—Ä–∞—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å).

### **üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ kube-proxy**
1. **–¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è Service ‚Üí Pod**  
   - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π IP (`ClusterIP`) –≤ —Ä–µ–∞–ª—å–Ω—ã–µ IP Pod'–æ–≤.
2. **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏**  
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É Pod'–∞–º–∏ —Å–µ—Ä–≤–∏—Å–∞.
3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Service Types**  
   - `ClusterIP`, `NodePort`, `LoadBalancer`, `ExternalName`.

### **üîπ –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã kube-proxy**
| –†–µ–∂–∏–º | –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã | –ü–ª—é—Å—ã | –ú–∏–Ω—É—Å—ã |
|-------|---------------|-------|--------|
| **iptables** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | –ü—Ä–∞–≤–∏–ª–∞ `iptables` –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å | –ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø—Ä–∏ 1000+ —Å–µ—Ä–≤–∏—Å–∞—Ö |
| **IPVS** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —è–¥–µ—Ä–Ω—ã–π L4-–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (`ip_vs`) | –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –¢—Ä–µ–±—É–µ—Ç `ip_vs` –≤ —è–¥—Ä–µ |
| **userspace** (—É—Å—Ç–∞—Ä–µ–ª) | –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ userspace | –ü—Ä–æ—Å—Ç–æ—Ç–∞ | –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |

### **üîπ –ö–∞–∫ kube-proxy –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã?**
1. **–î–ª—è `ClusterIP`**  
   - –°–æ–∑–¥–∞–µ—Ç iptables/IPVS-–ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç —Ç—Ä–∞—Ñ–∏–∫ —Å `ClusterIP` –Ω–∞ Pod'—ã.
   - –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª–∞ iptables:
     ```bash
     iptables -t nat -L KUBE-SERVICES | grep <SERVICE_IP>
     ```
2. **–î–ª—è `NodePort`**  
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –≤—Å–µ—Ö –Ω–æ–¥–∞—Ö (`30000-32767`) –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ `ClusterIP`.
3. **–î–ª—è `LoadBalancer`**  
   - –†–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ —Å –æ–±–ª–∞—á–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º (AWS/GCP), —Å–æ–∑–¥–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫.

---

## **2. CoreDNS: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç DNS –≤ Kubernetes?**

**CoreDNS** ‚Äî —ç—Ç–æ –≥–∏–±–∫–∏–π DNS-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ–Ω—è–µ—Ç `kube-dns` –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö. –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- **–†–µ–∑–æ–ª–≤–∏–Ω–≥ –∏–º–µ–Ω —Å–µ—Ä–≤–∏—Å–æ–≤** (`<service>.<namespace>.svc.cluster.local`).
- **–û–±—Ä–∞—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** (PTR-–∑–∞–ø–∏—Å–∏ –¥–ª—è IP).
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ DNS** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏).

### **üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã CoreDNS**
1. **CoreDNS Pod**  
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º–µ–Ω `kube-system`.
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `ConfigMap`:
     ```bash
     kubectl -n kube-system get configmap coredns -o yaml
     ```
2. **Kube-DNS Service**  
   - –ò–º–µ–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP (`10.96.0.10` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ `/etc/resolv.conf` –∫–∞–∂–¥–æ–≥–æ Pod'–∞.

### **üîπ –ö–∞–∫ CoreDNS –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã?**
1. **–ó–∞–ø—Ä–æ—Å –∏–∑ Pod'–∞**  
   - Pod –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç DNS-–∑–∞–ø—Ä–æ—Å (`nginx.default.svc.cluster.local`) –≤ `10.96.0.10`.
2. **CoreDNS –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–æ–Ω—ã**  
   - –ï—Å–ª–∏ –∏–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `<service>.<ns>.svc`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `ClusterIP` —Å–µ—Ä–≤–∏—Å–∞.
   - –ï—Å–ª–∏ –∏–º—è –≤–Ω–µ—à–Ω–µ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `google.com`), –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –≤—ã—à–µ—Å—Ç–æ—è—â–µ–º—É DNS.
3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**  
   - CoreDNS –∫–µ—à–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## **3. –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è kube-proxy –∏ CoreDNS**

```mermaid
graph TD
    subgraph Kubernetes Node
        Pod1(Pod A) -->|1. –ó–∞–ø—Ä–æ—Å –∫ Service| KubeProxy(kube-proxy)
        KubeProxy -->|2. iptables/IPVS| ServiceIP(ClusterIP: 10.96.1.10)
        ServiceIP -->|3. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ| Pod2(Pod B)
        
        Pod1 -->|4. DNS-–∑–∞–ø—Ä–æ—Å| CoreDNS(10.96.0.10)
        CoreDNS -->|5. –û—Ç–≤–µ—Ç: ClusterIP| Pod1
        CoreDNS -->|6. –í–Ω–µ—à–Ω–∏–π DNS| ExternalDNS(8.8.8.8)
    end

    subgraph Control Plane
        KubeAPI(kube-apiserver) -->|–û–±–Ω–æ–≤–ª—è–µ—Ç Endpoints| KubeProxy
        KubeAPI -->|–û–±–Ω–æ–≤–ª—è–µ—Ç Service| CoreDNS
    end
```

### **–ü–æ—è—Å–Ω–µ–Ω–∏–µ –∫ —Å—Ö–µ–º–µ**
1. **Pod ‚Üí Service**  
   - Pod –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ `nginx.default.svc.cluster.local`.
   - CoreDNS –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `ClusterIP` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `10.96.1.10`).
   - kube-proxy –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Pod —á–µ—Ä–µ–∑ iptables/IPVS.
2. **Pod ‚Üí External Service**  
   - –ï—Å–ª–∏ –∏–º—è –Ω–µ –∏–∑ `.svc`, CoreDNS –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –≤–Ω–µ—à–Ω–µ–º—É DNS (–Ω–∞–ø—Ä–∏–º–µ—Ä, `8.8.8.8`).
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª**  
   - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ Service/Endpoints, kube-apiserver —É–≤–µ–¥–æ–º–ª—è–µ—Ç kube-proxy –∏ CoreDNS.

---

## **4. –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**
### **üîπ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å kube-proxy**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
kubectl -n kube-system get ds kube-proxy -o yaml | grep mode

# –õ–æ–≥–∏ kube-proxy
kubectl -n kube-system logs -l k8s-app=kube-proxy
```

### **üîπ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CoreDNS**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å DNS-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Pod'–∞
kubectl exec -it <pod> -- cat /etc/resolv.conf

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É CoreDNS
kubectl -n kube-system logs -l k8s-app=kube-dns

# –¢–µ—Å—Ç–æ–≤—ã–π DNS-–∑–∞–ø—Ä–æ—Å
kubectl run -it --rm --image=alpine test -- sh
ping nginx.default.svc.cluster.local
```

---

## **5. –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è**
| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| **–°–µ—Ä–≤–∏—Å –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è** | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CoreDNS (`kubectl get pods -n kube-system`). |
| **–¢—Ä–∞—Ñ–∏–∫ –Ω–µ –∏–¥–µ—Ç –∫ Pod'–∞–º** | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å kube-proxy –∏ Endpoints (`kubectl get endpoints`). |
| **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ DNS-–∑–∞–ø—Ä–æ—Å—ã** | –£–≤–µ–ª–∏—á–∏—Ç—å –∫–µ—à CoreDNS (–æ–ø—Ü–∏—è `cache` –≤ ConfigMap). |
| **–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω–µ—à–Ω–∏–º DNS** | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `ndots` –≤ `/etc/resolv.conf` Pod'–∞. |

---

- **kube-proxy** –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é —Ç—Ä–∞—Ñ–∏–∫–∞ –∫ Pod'–∞–º —á–µ—Ä–µ–∑ `iptables`/`IPVS`.
- **CoreDNS** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç DNS-—Ä–µ–∑–æ–ª–≤–∏–Ω–≥ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ (`<service>.<ns>.svc`).
- –û–±–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã Service'–æ–≤ –≤ Kubernetes.
- –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
  - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **IPVS** –≤–º–µ—Å—Ç–æ iptables (–µ—Å–ª–∏ >1000 —Å–µ—Ä–≤–∏—Å–æ–≤).
  - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ CoreDNS.




### **üîπ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CoreDNS**
–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ ConfigMap:
```bash
kubectl -n kube-system get configmap coredns -o yaml
```
–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞:
```yaml
apiVersion: v1
data:
  Corefile: |
    .:53 {
        errors
        health
        ready
        kubernetes cluster.local in-addr.arpa ip6.arpa {  # –†–µ–∑–æ–ª–≤–∏–Ω–≥ Kubernetes-—Å–µ—Ä–≤–∏—Å–æ–≤
           pods verified
           fallthrough in-addr.arpa ip6.arpa
        }
        forward . /etc/resolv.conf  # –í–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–µ–ª–µ–≥–∏—Ä—É—é—Ç—Å—è –≤—ã—à–µ—Å—Ç–æ—è—â–µ–º—É DNS
        cache 30
        loop
        reload
    }
```

---

## **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è. –ö–∞–∫ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è FQDN (–ø–æ–ª–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞)?**
### **üîπ –í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞**
1. **–î–ª—è Service'–æ–≤**:
   - –ó–∞–ø—Ä–æ—Å: `nginx.default.svc.cluster.local` ‚Üí CoreDNS ‚Üí `ClusterIP` —Å–µ—Ä–≤–∏—Å–∞.
   - –ï—Å–ª–∏ namespace –Ω–µ —É–∫–∞–∑–∞–Ω (`nginx`), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è namespace Pod'–∞.

2. **–î–ª—è Pod'–æ–≤**:
   - –ó–∞–ø—Ä–æ—Å: `10-244-0-5.default.pod.cluster.local` ‚Üí IP `10.244.0.5`.
   - –ò–º—è Pod'–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ DNS-—Ñ–æ—Ä–º–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `10-244-0-5` –≤–º–µ—Å—Ç–æ `10.244.0.5`).

3. **–î–ª—è ExternalName-—Å–µ—Ä–≤–∏—Å–æ–≤**:
   ```yaml
   kind: Service
   apiVersion: v1
   metadata:
     name: my-db
   spec:
     type: ExternalName
     externalName: db.example.com  # CoreDNS –≤–µ—Ä–Ω–µ—Ç CNAME-–∑–∞–ø–∏—Å—å
   ```
   - –ó–∞–ø—Ä–æ—Å: `my-db.default.svc.cluster.local` ‚Üí `db.example.com`.

### **üîπ –í–Ω–µ—à–Ω–∏–µ DNS-–∑–∞–ø—Ä–æ—Å—ã**
- –ï—Å–ª–∏ –∏–º—è –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥–æ–º–µ–Ω—É `cluster.local`, CoreDNS –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ DNS –∏–∑ `/etc/resolv.conf` Pod'–∞.
- –ü—Ä–∏–º–µ—Ä:
  ```bash
  kubectl exec -it my-pod -- cat /etc/resolv.conf
  ```

## **–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è**
| –ü—Ä–æ–±–ª–µ–º–∞ | –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|-------------|---------|
| **DNS-–∑–∞–ø—Ä–æ—Å—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç** | `kubectl exec -it my-pod -- nslookup google.com` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CoreDNS (`kubectl -n kube-system logs coredns-...`). |
| **Service –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è** | `nslookup nginx.default.svc.cluster.local` | –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (`kubectl get svc`). |
| **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ DNS-–∑–∞–ø—Ä–æ—Å—ã** | `kubectl -n kube-system describe configmap/coredns` | –£–≤–µ–ª–∏—á–∏—Ç—å `cache` –≤ CoreDNS. |
| **–¢—Ä–∞—Ñ–∏–∫ –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ Pod'–æ–≤** | `kubectl get endpoints` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ Pod'—ã —É —Å–µ—Ä–≤–∏—Å–∞. |

---

## **–ü—Ä–∏–º–µ—Ä—ã DNS-–∑–∞–ø—Ä–æ—Å–æ–≤**
```bash
# –ó–∞–ø—Ä–æ—Å –∏–∑ Pod'–∞ –∫ —Å–µ—Ä–≤–∏—Å—É
kubectl exec -it my-pod -- curl http://nginx.default.svc.cluster.local

# –†—É—á–Ω–æ–π DNS-–∑–∞–ø—Ä–æ—Å
kubectl exec -it my-pod -- nslookup nginx.default.svc.cluster.local

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ DNS
kubectl exec -it my-pod -- ping google.com
```

---

- **–°–µ—Ç—å –≤ Kubernetes** –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ **CNI-–ø–ª–∞–≥–∏–Ω–∞—Ö** –∏ **kube-proxy**.
- **CoreDNS** —Ä–µ–∑–æ–ª–≤–∏—Ç –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `<service>.<ns>.svc.cluster.local`.
- **FQDN-—Ä–µ–∑–æ–ª–≤–∏–Ω–≥** –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:
  - –ù–∞—Å—Ç—Ä–æ–µ–∫ `/etc/resolv.conf` Pod'–∞.
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ—á–µ–∫ –≤ –∏–º–µ–Ω–∏ (`ndots`).
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ `search`-–¥–æ–º–µ–Ω–æ–≤.
- –î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **nslookup**, **dig** –∏ **–ª–æ–≥–∏ CoreDNS**.
